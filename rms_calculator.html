<!DOCTYPE html>
<html lang="en-US">

<head>

  <!-- Head -->
  <title>Average and RMS value Calculator</title>
  <meta charset="UTF-8">
  <meta name="Keywords" content="RMS, average, median, value, calculator">
  <meta name="Description" content="JavaScript average and RMS value Calculator">
  <meta name="Version" content=" 15/03/2018 - SHA:9E4FBB ">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />

  <!-- Styles -->
  <style>
     ﻿    body {
      font: 16px sans-serif;
      background-color: #f0f4f4;
      margin: 0;
      min-width: 420px;
    }
    /* Responsive design for Small screen */
    @media screen and (max-width: 640px) {
      body { min-width: 420px !important; }
    }

    .content {
      max-width: 640px;
      margin: 0 auto;
      padding: 16px 16px 32px 16px;
      background-color: #fff;
    }

    .row {
      padding-bottom: 2px;
    }

    .footer {
      max-width: 640px;
      margin: 0 auto;
      text-align: center;
      padding: 20px 16px 60px 16px;
      font-size: 12px;
      font-weight: bold;
      background-color: #ddd;
    }

    h1 {
      font-size: 140%;
      font-weight: bold;
      text-transform: uppercase;
      margin: 20px 0 10px 0;
    }

    h2 {
      font-size: 120%;
      font-weight: bold;
      margin: 20px 0 6px 0;
    }

    img {
      padding: 2px 0 2px 0;
      max-width: 100%;
    }

    input[type=button] {
      font: inherit;
      text-align: center;
      background-color: #eee;
      border: 1px solid #888;
      border-radius: 4px;
    }

    /* Column 1: Variable name */
    .sname {
      display: inline-block;
      min-width: 6em;
    }

    /* Column 2: Variable Value (input form) */
    input[type=text], select, textarea {
      width: 100%;
      padding: 0 4px 0 4px;
      font: inherit;
      text-align: right;
      box-sizing: border-box;
      border: 1px solid #888;
      border-radius: 4px;
    }
    .sval {
      display: inline-block;
      width: 6em;
    }
    .sval input[type=text] {
      background-color: #FFFFC0;
    }

    .sconst {
      display: inline-block;
      width: 6em;
    }
    .sconst input[type=text] {
      background-color: #FFFFFF;
    }

    .scalc  {
      display: inline-block;
      width: 6em;
    }
    .scalc input[type=text] {
      background-color: #C0FFFF;
    }

    /* Column 3: Variable Units */
    .sunit {
      display: inline-block;
      min-width: 6em;
      text-align: center;
      border: 1px solid #888;
      border-radius: 4px;
    }

    /* Column 4: Variable comment */
    .scoment {
      display: inline-block;
      min-width: 20em;
    }
  </style>

  <!-- Script -->
  <script>
     ﻿

     

    <!-- Include script (48 lines ): zeros.js -->
    ﻿
    &lt;!-- Zero finding with secant method. https://en.wikipedia.org/wiki/Secant_method --&gt;
    function zero_secant(x, fn) {
      var iter, x0, x1, x2, y0, y1;
      x1 = x * 1.0;
      y1 = fn(x1);
      x2 = x1 * 1.001 + 1e-8;
      for(iter=0; iter&lt;40; iter++) {
        x0 = x1;
        y0 = y1;
        x1 = x2
        y1 = fn(x1);
        if ((Math.abs(y1) &lt; 1e-50) || Math.abs((x1-x0)/x1) &lt; 1e-12)     
          break;
        if (y0 == y1)
           x2 = x1 * 1.001 + 1e-8;
        else 
           x2 = x1 - y1*(x1-x0)/(y1-y0);
      }
      return x1;
    }

    
    &lt;!-- Zero finding between two points --&gt;
    function zero_bisect(x0, x1, fn) {
      var iter, x2, y0, y1, y2;
      x0 = x0 * 1.0;
      x1 = x1 * 1.0;
      y0 = fn(x0);
      y1 = func_1(x1);
      if (Math.sign(y0 * y1) != -1) 
        return &#39;&#39;;
      for(iter=0; iter&lt;80; iter++) {
        x2 = 0.5 * (x0 + x1);
        y2 = func_1(x2);
        if ((Math.abs(y2) &lt; 1e-50) || Math.abs((x1-x0)/x1) &lt; 1e-12)
          break;
        if (Math.sign(y2) == Math.sign(y1)) {
          y1 = y2;
          x1 = x2;
        }
        else {
          y0 = y2;
          x0 = x2;
        }
      }
      return x2;
    }

    <!-- End zeros.js --> 
    
    <!-- Init calculations -->
    function init() {
       if  (getCookie("saved") == 'true')
          load_var();
       else
          reset_var();
       calc();
    }

    <!-- Compute calculations -->
    function calc() {

      <!-- Variable: Maximum value of signal -->
      V_max = tonum("V_max");

      <!-- Variable: Minimum value of signal -->
      V_min = tonum("V_min");

      <!-- Variable: Duty cycle -->
      D = tonum("D") * 1e-02;

      <!-- Variable: V_rms of Wave 1 -->
      V1_rms = tonum("V1_rms");

      <!-- Variable: V_rms of Wave 2 -->
      V2_rms = tonum("V2_rms");

      <!-- Variable: V_rms of Wave 3 -->
      V3_rms = tonum("V3_rms");

      <!-- Variable: V_rms of Wave 4 -->
      V4_rms = tonum("V4_rms");

      <!-- Variable: V_rms of Wave 5 -->
      V5_rms = tonum("V5_rms");

      <!-- Calculation: Average value of sine wave (offset) -->
      V_offset1 = V_min + 0.5 * (V_max - V_min);

      <!-- Calculation: RMS value of sine wave (without offset) -->
      V_sin_ac_rms = Math.abs(V_max - V_min) * Math.sqrt(0.125);

      <!-- Calculation: RMS value of sine wave (with offset) -->
      V_sin_rms = Math.sqrt(V_sin_ac_rms * V_sin_ac_rms + V_offset1 * V_offset1);

      <!-- Calculation: Average value of Triangle wave (offset) -->
      V_offset2 = V_min + 0.5 * (V_max - V_min);

      <!-- Calculation: RMS value of Triangle wave (without offset) -->
      V_tri_ac_rms = Math.abs(V_max - V_min) * Math.sqrt(1.0/12);

      <!-- Calculation: RMS value of Triangle wave (with offset) -->
      V_tri_rms = Math.sqrt(V_tri_ac_rms * V_tri_ac_rms + V_offset2 * V_offset2);

      <!-- Calculation: Average value of Rectified Sine wave (offset) -->
      V_offset3 = V_min + (V_max - V_min) * 2 * D / Math.PI;

      <!-- Calculation: RMS value of of Rectified Sine wave (without offset) -->
      V_rsin_ac_rms = Math.abs(V_max - V_min) * Math.sqrt(D*(0.5 - 4.0 /(Math.PI*Math.PI)));

      <!-- Calculation: RMS value of of Rectified Sine wave (with offset) -->
      V_rsin_rms = Math.sqrt(V_rsin_ac_rms * V_rsin_ac_rms + V_offset3 * V_offset3);

      <!-- Calculation: Average value of Sawtooth wave (offset) -->
      V_offset4 = V_min + D * 0.5 * (V_max - V_min);

      <!-- Calculation: RMS value of Sawtooth wave (without offset) -->
      V_saw_ac_rms = Math.abs(V_max - V_min) * Math.sqrt(D * 0.0833333);

      <!-- Calculation: RMS value of Sawtooth wave (with offset) -->
      V_saw_rms = Math.sqrt(V_saw_ac_rms * V_saw_ac_rms + V_offset4 * V_offset4);

      <!-- Calculation: Average value of Square wave (offset) -->
      V_offset5 = V_min +  D * (V_max - V_min);

      <!-- Calculation: RMS value of Square wave (without offset) -->
      V_sq_rms = Math.sqrt(V_max*V_max*D + V_min*V_min*(1-D));
      V_sq_ac_rms = Math.sqrt(V_sq_rms*V_sq_rms - V_offset5 * V_offset5);

      <!-- Calculation: RMS value of Square wave (with offset) -->

      <!-- Calculation: RMS value of all waves -->
      V_add_rms = Math.sqrt(V1_rms*V1_rms + V2_rms*V2_rms + V3_rms*V3_rms + V4_rms*V4_rms + V5_rms*V5_rms);

      <!-- Print calc: Average value of sine wave (offset) -->
      document.getElementById("V_offset1").value = num_fix(V_offset1, 5);

      <!-- Print calc: RMS value of sine wave (without offset) -->
      document.getElementById("V_sin_ac_rms").value = num_fix(V_sin_ac_rms, 5);

      <!-- Print calc: RMS value of sine wave (with offset) -->
      document.getElementById("V_sin_rms").value = num_fix(V_sin_rms, 5);

      <!-- Print calc: Average value of Triangle wave (offset) -->
      document.getElementById("V_offset2").value = num_fix(V_offset2, 5);

      <!-- Print calc: RMS value of Triangle wave (without offset) -->
      document.getElementById("V_tri_ac_rms").value = num_fix(V_tri_ac_rms, 5);

      <!-- Print calc: RMS value of Triangle wave (with offset) -->
      document.getElementById("V_tri_rms").value = num_fix(V_tri_rms, 5);

      <!-- Print calc: Average value of Rectified Sine wave (offset) -->
      document.getElementById("V_offset3").value = num_fix(V_offset3, 5);

      <!-- Print calc: RMS value of of Rectified Sine wave (without offset) -->
      document.getElementById("V_rsin_ac_rms").value = num_fix(V_rsin_ac_rms, 5);

      <!-- Print calc: RMS value of of Rectified Sine wave (with offset) -->
      document.getElementById("V_rsin_rms").value = num_fix(V_rsin_rms, 5);

      <!-- Print calc: Average value of Sawtooth wave (offset) -->
      document.getElementById("V_offset4").value = num_fix(V_offset4, 5);

      <!-- Print calc: RMS value of Sawtooth wave (without offset) -->
      document.getElementById("V_saw_ac_rms").value = num_fix(V_saw_ac_rms, 5);

      <!-- Print calc: RMS value of Sawtooth wave (with offset) -->
      document.getElementById("V_saw_rms").value = num_fix(V_saw_rms, 5);

      <!-- Print calc: Average value of Square wave (offset) -->
      document.getElementById("V_offset5").value = num_fix(V_offset5, 5);

      <!-- Print calc: RMS value of Square wave (without offset) -->
      document.getElementById("V_sq_ac_rms").value = num_fix(V_sq_ac_rms, 5);

      <!-- Print calc: RMS value of Square wave (with offset) -->
      document.getElementById("V_sq_rms").value = num_fix(V_sq_rms, 5);

      <!-- Print calc: RMS value of all waves -->
      document.getElementById("V_add_rms").value = num_fix(V_add_rms, 5);
    }

    <!-- Reset variables to default values -->
    function reset_var() {
      document.getElementById("V_max").value = 5;
      document.getElementById("V_min").value = 1;
      document.getElementById("D").value = 50;
      document.getElementById("V1_rms").value = '';
      document.getElementById("V2_rms").value = '';
      document.getElementById("V3_rms").value = '';
      document.getElementById("V4_rms").value = '';
      document.getElementById("V5_rms").value = '';
      calc();
    }

    <!-- Clear variables -->
    function clear_var() {
      document.getElementById("V_max").value = '';
      document.getElementById("V_min").value = '';
      document.getElementById("D").value = '';
      document.getElementById("V1_rms").value = '';
      document.getElementById("V2_rms").value = '';
      document.getElementById("V3_rms").value = '';
      document.getElementById("V4_rms").value = '';
      document.getElementById("V5_rms").value = '';
      calc();
    }

    <!-- Save variables -->
    function save_var() {
      var expiresdate = new Date(2068, 1, 02, 11, 20);
      expiresdate = "expires=" + expiresdate.toUTCString();
      var names = ["V_max", "V_min", "D", "V1_rms", "V2_rms", "V3_rms", "V4_rms", "V5_rms",  ];
      for(var i=0; i<names.length; i++) {
        document.cookie = names[i] + " = " + encodeURIComponent(tonum(names[i])) + "; " + expiresdate;
      }
      document.cookie = "saved = true; " + expiresdate
    }

    <!-- Load variables -->
    function load_var() {
      document.getElementById("V_max").value = getCookie("V_max");
      document.getElementById("V_min").value = getCookie("V_min");
      document.getElementById("D").value = getCookie("D");
      document.getElementById("V1_rms").value = getCookie("V1_rms");
      document.getElementById("V2_rms").value = getCookie("V2_rms");
      document.getElementById("V3_rms").value = getCookie("V3_rms");
      document.getElementById("V4_rms").value = getCookie("V4_rms");
      document.getElementById("V5_rms").value = getCookie("V5_rms");
      calc();
    }

    <!-- Read cookies -->
    function getCookie(name) {
      var re = new RegExp(name + "=([^;]+)");
      var value = re.exec(document.cookie);
      return (value != null) ? unescape(value[1]) : null;
    }

    <!-- Evalue inputs with '.' or ',' as comma -->
    function tonum(id) {
      val = document.getElementById(id).value.replace(',', '.');
      if (isNaN(val)) return '';
      return val * 1.0; <!-- return number -->
    }

    <!-- Format number with fix digits -->
    function num_fix(number, digits) {
      if (!isFinite(number)) return '';
      if (number == 0) return '0';
      if (Math.sign(number) < 0)
        var sign = '-';
      else
        var sign = '';
     number = Math.abs(number)
      exp = Math.ceil(Math.log10(number) + 0.000001);
      number = Math.round(number * Math.pow(10, digits - exp)) + '';
      if (digits > exp) { <!-- decimals -->
        if (exp <= 0) { <!-- all decimals -->
          return sign + '0.0000000'.substr(0, 2 - exp) + number;
        }
        else { <!-- integer and decimals -->
          return sign + number.substr(0, exp) + '.' + number.substr(exp, digits - exp);
        }
      }
      else { <!-- no decimals -->
        number = number  + '0000000000'
        return sign + number.substr(0, exp);
      }
    }

    <!-- Manage keys [Enter] and [tab] -->
    function OnKeyPress(evt) {
      var evt = (evt) ? evt : ((event) ? event : null);
      var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
      if (node.type=="text") {
        if (evt.keyCode == 9) { calc(); return; }
        if (evt.keyCode == 13) { calc(); return false; }
      }
    }
    document.onkeypress = OnKeyPress;
  </script>

</head>


<body onload="init()">

  <!-- Content -->
    ﻿<div class="content">

  <h1>Average and RMS value Calculator</h1>

    <!--  Image: waves.png -->
    <img alt="Wave Types" src="">

    <!--  Section: Buttons for manage values -->
    &lt;div class=&#34;row&#34;&gt;Values:
&lt;input type=&#34;button&#34; value=&#34;Reset&#34; onclick=&#34;reset_var()&#34;&gt;
&lt;input type=&#34;button&#34; value=&#34;Clear&#34; onclick=&#34;clear_var()&#34;&gt;
&lt;input type=&#34;button&#34; value=&#34;Save&#34; onclick=&#34;save_var()&#34;&gt;
&lt;input type=&#34;button&#34; value=&#34;Load&#34; onclick=&#34;load_var()&#34;&gt;
&lt;/div&gt;


    <!--  Header: Maximum and Minimum values of wave (peak to peak) -->
    <h2 id="Maximum_and_Minimum_values_of_wave_(peak_to_peak)">Maximum and Minimum values of wave (peak to peak)</h2>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_max</div>
      <div class="sval"> <form> <input type="text" id="V_max"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">Maximum value of signal</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_min</div>
      <div class="sval"> <form> <input type="text" id="V_min"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">Minimum value of signal</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">D</div>
      <div class="sval"> <form> <input type="text" id="D"> </form> </div>
      <div class="sunit">%</div>
      <div class="scoment">Duty cycle</div>
    </div>

    <!--  Header: Sine wave -->
    <h2 id="Sine_wave">Sine wave</h2>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_offset</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_offset1"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">Average value of sine wave (offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_sin_ac_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_sin_ac_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of sine wave (without offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_sin_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_sin_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of sine wave (with offset)</div>
    </div>

    <!--  Header: Triangle wave -->
    <h2 id="Triangle_wave">Triangle wave</h2>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_offset</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_offset2"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">Average value of Triangle wave (offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_tri_ac_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_tri_ac_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of Triangle wave (without offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_tri_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_tri_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of Triangle wave (with offset)</div>
    </div>

    <!--  Header: Rectified Sine wave -->
    <h2 id="Rectified_Sine_wave">Rectified Sine wave</h2>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_offset</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_offset3"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">Average value of Rectified Sine wave (offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_rsin_ac_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_rsin_ac_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of of Rectified Sine wave (without offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_rsin_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_rsin_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of of Rectified Sine wave (with offset)</div>
    </div>

    <!--  Header: Sawtooth wave -->
    <h2 id="Sawtooth_wave">Sawtooth wave</h2>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_offset</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_offset4"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">Average value of Sawtooth wave (offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_saw_ac_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_saw_ac_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of Sawtooth wave (without offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_saw_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_saw_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of Sawtooth wave (with offset)</div>
    </div>

    <!--  Header: Square wave -->
    <h2 id="Square_wave">Square wave</h2>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_offset</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_offset5"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">Average value of Square wave (offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_sq_ac_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_sq_ac_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of Square wave (without offset)</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_sq_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_sq_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of Square wave (with offset)</div>
    </div>

    <!--  Header: Sum of waves RMS value -->
    <h2 id="Sum_of_waves_RMS_value">Sum of waves RMS value</h2>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V1_rms</div>
      <div class="sval"> <form> <input type="text" id="V1_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">V_rms of Wave 1</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V2_rms</div>
      <div class="sval"> <form> <input type="text" id="V2_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">V_rms of Wave 2</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V3_rms</div>
      <div class="sval"> <form> <input type="text" id="V3_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">V_rms of Wave 3</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V4_rms</div>
      <div class="sval"> <form> <input type="text" id="V4_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">V_rms of Wave 4</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V5_rms</div>
      <div class="sval"> <form> <input type="text" id="V5_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">V_rms of Wave 5</div>
    </div>

    <!--  Row  -->
    <div class="row">
      <div class="sname">V_add_rms</div>
      <div class="scalc"> <form> <input disabled="disabled" type="text" id="V_add_rms"> </form> </div>
      <div class="sunit">V</div>
      <div class="scoment">RMS value of all waves</div>
    </div>

</div>  <!-- End content -->

  <!-- Footer -->
    ﻿<div class="footer">
  <!-- License -->
  This work by <a href="https://github.com/picuino/picalc">Picuino</a>
  is licensed under a
  <a rel="MIT License" href="http://www.gnu.org/licenses/gpl-3.0.txt">
  GPL version 3 license</a>.
</div>

</body>

</html>